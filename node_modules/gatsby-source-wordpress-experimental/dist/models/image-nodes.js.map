{"version":3,"sources":["../../src/models/image-nodes.js"],"names":["imageNodes","state","nodeMetaByUrl","nodeIds","reducers","setState","payload","setNodeIds","_","pushNodeMeta","id","sourceUrl","modifiedGmt","push","nodeUrl"],"mappings":";;;;;AAAA;;AAEA,MAAMA,UAAU,GAAG;AACjBC,EAAAA,KAAK,EAAE;AACLC,IAAAA,aAAa,EAAE,EADV;AAELC,IAAAA,OAAO,EAAE;AAFJ,GADU;AAMjBC,EAAAA,QAAQ,EAAE;AACRC,IAAAA,QAAQ,CAACJ,KAAD,EAAQK,OAAR,EAAiB;AACvBL,MAAAA,KAAK,qBACAA,KADA,EAEAK,OAFA,CAAL;AAKA,aAAOL,KAAP;AACD,KARO;;AAURM,IAAAA,UAAU,CAACC,CAAD,EAAIF,OAAJ,EAAa;AACrB,aAAO;AACLH,QAAAA,OAAO,EAAEG;AADJ,OAAP;AAGD,KAdO;;AAgBRG,IAAAA,YAAY,CAACR,KAAD,EAAQ;AAAES,MAAAA,EAAF;AAAMC,MAAAA,SAAN;AAAiBC,MAAAA;AAAjB,KAAR,EAAwC;AAClDX,MAAAA,KAAK,CAACE,OAAN,CAAcU,IAAd,CAAmBH,EAAnB;AACA,YAAMI,OAAO,GAAG,uDAAuBH,SAAvB,CAAhB,CAFkD,CAGlD;AACA;;AACA,UAAI,CAACV,KAAK,CAACC,aAAN,CAAoBY,OAApB,CAAL,EAAmC;AACjCb,QAAAA,KAAK,CAACC,aAAN,CAAoBY,OAApB,IAA+B;AAC7BJ,UAAAA,EAD6B;AAE7BE,UAAAA;AAF6B,SAA/B;AAID;;AAED,aAAOX,KAAP;AACD;;AA7BO;AANO,CAAnB;eAuCeD,U","sourcesContent":["import { stripImageSizesFromUrl } from \"~/steps/source-nodes/fetch-nodes/fetch-referenced-media-items\"\n\nconst imageNodes = {\n  state: {\n    nodeMetaByUrl: {},\n    nodeIds: [],\n  },\n\n  reducers: {\n    setState(state, payload) {\n      state = {\n        ...state,\n        ...payload,\n      }\n\n      return state\n    },\n\n    setNodeIds(_, payload) {\n      return {\n        nodeIds: payload,\n      }\n    },\n\n    pushNodeMeta(state, { id, sourceUrl, modifiedGmt }) {\n      state.nodeIds.push(id)\n      const nodeUrl = stripImageSizesFromUrl(sourceUrl);\n      // dont overwrite the lookup table in case we have multiple\n      // sized urls for the same image\n      if (!state.nodeMetaByUrl[nodeUrl]) {\n        state.nodeMetaByUrl[nodeUrl] = {\n          id,\n          modifiedGmt,\n        };\n      }\n\n      return state\n    },\n  },\n}\n\nexport default imageNodes\n"],"file":"image-nodes.js"}